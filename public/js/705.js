(self.webpackChunk=self.webpackChunk||[]).push([[705],{7057:(t,a,o)=>{"use strict";o.d(a,{Z:()=>r});var s=o(3645),e=o.n(s)()((function(t){return t[1]}));e.push([t.id,".cart-delete-item{cursor:pointer}.modal-backdrop{position:relative}.cart-list{max-height:455px;overflow-y:auto;padding-right:16px}",""]);const r=e},1705:(t,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>n});const s={props:{cartRoute:{type:String,required:!1,default:"/cart"},onCartPage:{type:Boolean,required:!0,default:!1}},data:function(){return{cartRouteData:this.cartRoute,errors:[]}},mounted:function(){this.loadStore()},computed:{cart:function(){var t=[],a=this.$store.state.cart;return $.each(a,(function(a,o){$.each(o.attributes,(function(a,s){var e={attributes:s,product:o.product};t.push(e)}))})),t}},methods:{showModal:function(t){$(".block-mini-cart .mini-cart").hide(),$("#removeModuleHomeCart"+t).modal("show")},removeCart:function(t,a){var o=this;axios.post(window.origin+"/cart/remove",{product:t.product,attributes:t.attributes}).then((function(t){t.data.result&&(o.loadStore(),$("#removeModuleHomeCart"+a).modal("hide"))})).catch((function(t){console.log("CartModuleHome:removeCart"),console.log(t)}))},loadStore:function(){var t=this;axios.post(window.origin+"/cart/update",{}).then((function(a){var o=a.data;t.clearStore(),$.each(o,(function(a,o){t.$store.commit("add",o)})),t.totalStore()})).catch((function(t){console.log("CartModuleHome:loadStore"),console.log(t)}))},clearStore:function(){this.$store.commit("clear")},totalStore:function(){var t=this;axios.post(window.origin+"/cart/total",{}).then((function(a){var o=a.data;t.$store.commit("total",{count:o.count,cost:o.cost})})).catch((function(t){console.log("CartModuleHome:totalStore"),console.log(t)}))}}};var e=o(3379),r=o.n(e),i=o(7057),c={insert:"head",singleton:!1};r()(i.Z,c);i.Z.locals;const n=(0,o(1900).Z)(s,(function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("li",{staticClass:"block-mini-cart",class:{"d-none":t.onCartPage},attrs:{id:"block-mini-cart"}},[o("a",{attrs:{href:"#"}},[o("i",{staticClass:"icon icon-basket"}),t._v(" "),o("span",{staticClass:"number-product-in-cart"},[t._v(t._s(t.$store.state.allCartCount))])]),t._v(" "),o("div",{staticClass:"mini-cart"},[o("div",{},[o("ul",{staticClass:"cart-list"},t._l(t.cart,(function(a,s){return o("li",{key:s,staticClass:"item-product-in-cart"},[o("div",{staticClass:"block-img"},[o("img",{staticClass:"img",attrs:{src:a.product.main_image.length>0?"/storage/"+a.product.main_image[0].path:"/images/backend/no-image.png",alt:"photo-product"}})]),t._v(" "),o("div",{staticClass:"info-product"},[o("a",{staticClass:"title-product",attrs:{href:"/product/"+a.product.id}},[t._v(t._s(a.product.name))]),t._v(" "),o("span",{staticClass:"new-price"},[t._v(t._s(a.product.actual_price_by_role)+" грн.")])]),t._v(" "),o("span",{staticClass:"icon-close cart-delete-item",on:{click:function(a){return a.preventDefault(),t.showModal(s)}}}),t._v(" "),o("div",{staticClass:"modal fade modal-custom-moto",attrs:{id:"removeModuleHomeCart"+s,tabindex:"-1",role:"dialog","aria-labelledby":"#removeModuleHomeCart"+s,"aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[t._m(0,!0),t._v(" "),o("div",{staticClass:"modal-bottom btn-group"},[o("button",{staticClass:"btn full-color",attrs:{"data-dismiss":"modal"}},[t._v("Закрити")]),t._v(" "),o("button",{staticClass:"btn",on:{click:function(o){return o.preventDefault(),t.removeCart(a,s)}}},[t._v("Видалити")])])])])])])})),0),t._v(" "),o("div",{staticClass:"total-info"},[o("div",{staticClass:"block-number"},[o("span",[t._v("Загалом товарів : ")]),t._v(" "),o("span",{staticClass:"number"},[t._v("  "+t._s(t.$store.state.allCartCount))])]),t._v(" "),o("div",{staticClass:"block-sum"},[o("span",[t._v(" Сума: ")]),t._v(" "),o("div",[o("span",{staticClass:"sum"},[t._v(t._s(t.$store.state.allCost))]),t._v(" "),o("span",[t._v(" грн.")])])])]),t._v(" "),o("a",{staticClass:"btn-custom-project",attrs:{href:t.cartRouteData}},[t._v("Перейти до кошика")])])])])}),[function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("h5",{staticClass:"title"},[o("span",[t._v("Видалити")]),t._v(" товар з кошика?")])}],!1,null,null,null).exports}}]);